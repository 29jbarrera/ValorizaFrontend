<ion-header>
  <ion-toolbar>
    <ion-title class="ion-text-center"> {{title}} </ion-title>
    <ion-button slot="end" (click)="closeModal()" fill="clear" id="modal-subfamilies-button-close-modal">
      <i class="fas fa-times"></i>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-row>
    <ion-col class="my-3" size="12">
      <div class="text-left text-xs mb-2 pl-1 font-light text-700">
        Selecciona Subfamilia
      </div>
      <p-dropdown
        placeholder="Selecciona grupo..."
        [options]="subfamilies | filterSubfamilies : search_term"
        styleClass="w-full dropdown-valoriza "
        [showClear]="true"
        [(ngModel)]="selected_subfamily"
      >
        <ng-template pTemplate="header">
          <div class="p-3">
            <div
              class="p-inputwrapper p-input-icon-right w-full"
              (click)="$event.stopPropagation()"
            >
              <i
                *ngIf="search_term.length"
                class="pi pi-times"
                (click)="reset()"
                id="modal-subfamilies-reset-searchbar-search-subfamilies"
              ></i>
              <input
                pInputText
                class="w-full input-text-valoriza"
                (input)="searchToolbar($event)"
                placeholder="Escribe para buscar..."
                [value]="search_term"
                id="modal-subfamilies-input-searchbar-subfamilies"
              />
            </div>
          </div>
        </ng-template>

        <ng-template pTemplate="selectedItem" let-subfamily>
          <div>{{ get_description_subfamily(subfamily) }}</div>
        </ng-template>
        <ng-template let-subfamily pTemplate="item">
          <div>{{ get_description_subfamily(subfamily) }}</div>
        </ng-template>
        <ng-template pTemplate="empty">
          <div class="p-2 text-center">
            <span>No se encontraron subfamilias disponibles.</span>
          </div>
        </ng-template>
      </p-dropdown>
    </ion-col>
  </ion-row>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button expand="block" (click)="save()" id="modal-subfamilies-button-save-changes">
      <strong> {{ submit_text }} </strong>
    </ion-button>
  </ion-toolbar>
</ion-footer>
